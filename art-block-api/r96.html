<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script>
      // Token Ids: 10000000,10000001,10000002,10000003,10000004,10000005,10000006,10000007,10000008,10000009,10000010,10000011,10000012,10000013,10000014,10000015,10000016,10000017,10000018,10000019,10000020,10000021,10000022,10000023,10000024,10000025,10000026,10000027,10000028,10000029,10000030,10000031,10000032,10000033,10000034,10000035,10000036,10000037,10000038,10000039,10000040,10000041,10000042,10000043,10000044,10000045,10000046,10000047,10000048,10000049,10000050,10000051,10000052,10000053,10000054,10000055,10000056,10000057,10000058,10000059,10000060,10000061,10000062,10000063,10000064,10000065,10000066,10000067,10000068,10000069,10000070,10000071,10000072,10000073,10000074,10000075,10000076,10000077,10000078,10000079,10000080,10000081,10000082,10000083,10000084,10000085,10000086,10000087,10000088,10000089,10000090,10000091,10000092,10000093,10000094,10000095,10000096,10000097,10000098,10000099
      let tokenData = {
        hash:
          "0x2ed5912b84b7777777777772735e5a45416a5a723172a643ca545bee87be96c2",
        //"0x2ed5912b84b45dad487dd392735e5a45416a5a723172a643ca545bee87be96c2", 0x9C238282Db349A20d501c5bfeE13ed29ae5a451C",
        tokenId: "500005"
      };
    </script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
      }

      canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
  </head>
  <body>
    <center>
      <h1>
        5 üçæ
      </h1>
      <a href="https://api.artblocks.io/project/5">project 5</a>
    </center>
    <script>
      var RNDS, _r, CMX, LOAD, CSZ, TTL, SQR, E, DIM = Math.min(window.innerWidth, window.innerHeight),
     M = DIM / 1e3,
     D2 = DIM / 2,
     RSP = 1e-4,
     _H = [];

function setup() {
     createCanvas(DIM, DIM), strokeWeight(M), noFill();
     for (let t = 0; t < 32; t++) _H.push(parseInt(tokenData.hash.slice(2 + 2 * t, 4 + 2 * t), 16) / 256);
     _r = parseInt(tokenData.hash.slice(0, 16), 16), CMX = .05 + .2 * _H[2], LOAD = -.1 - .4 * _H[3], TTL = 40, CSZ = .25 < _H[4] ? (SQR = .5 < _H[9]) ? .5 < _H[4] ? .75 : .98 : .61 : (SQR = 1, 1.1);
     var e = parseInt(50 + 200 * _H[0]),
          s = .6 - .4 * _H[0],
          a = 1 + _H[0],
          t = "#001abf",
          i = "#008044",
          o = "#ffc800",
          n = "#d00900",
          h = "#df60b0",
          l = "#004080",
          o = [
               [t, i, o, n, h],
               [t, i, o, "#ff0900"],
               [t, o, n, h],
               [n, o, h],
               [i, h],
               [i, o],
               [l, h],
               [l, i],
               [n],
               [h],
               [o],
               ["#404040"]
          ],
          d = o[parseInt(_H[5] * o.length)];
     RNDS = _H[8] < .1 ? (background("#00041f"), blendMode(SCREEN), 24e3) : (background("#fff8e0"), blendMode(MULTIPLY), 32e3), E = {
          col: d[0]
     };
     for (let t = 0; t < e; t++) Node.add(d[t % d.length], r(s), vectr(a))
}

function draw() {
     translate(D2, D2);
     for (var t = millis(); beginShape(), E = new Energy(E.col, TTL, vectr()), endShape(), millis() - t < 30 && --RNDS;);
     RNDS || noLoop()
}

function r(t = 1, e = 0) {
     return _R() * (t - e) + e
}

function vectr(t = 1) {
     return createVector(1, 0).rotate(_R() * TWO_PI).mult(r(t))
}

function _R() {
     return _r ^= _r << 13, _r ^= _r >> 17, ((_r ^= _r << 5) < 0 ? 1 + ~_r : _r) % 1e3 / 1e3
}
Energy = class {
     constructor(t, e, r) {
          this.col = color(t), this.nrg = e, this.p = r, this.draw()
     }
     draw() {
          var t = Node.gravity(this);
          this.p.add(t);
          t = 24 + 16 * (1 - Math.sqrt(1 / this.nrg));
          this.col.setAlpha(t), stroke(this.col), (SQR && Math.abs(this.p.x) < CSZ && Math.abs(this.p.y) < CSZ || !SQR && this.p.magSq() < CSZ) && (vertex(this.p.x * D2, this.p.y * D2), 1 < --this.nrg && this.draw())
     }
     mix(t) {
          var e = 1 - CMX;
          this.col = color(red(this.col) * e + red(t) * CMX, green(this.col) * e + green(t) * CMX, blue(this.col) * e + blue(t) * CMX)
     }
}, Node = class {
     constructor(t, e, r) {
          this.col = t, this.mag = e, this.pos = r, this.L = LOAD
     }
     static gravity(a) {
          let i = vectr(0);
          for (let s = 0; s < Node._n.length; s++) {
               let t = Node._n[s],
                    e = t.pos.copy(),
                    r = e.dist(a.p);
               r && (e.sub(a.p), e.setMag(t.getMag() / (100 * r)), i.add(e), r < t.mag / 2 ? (a.mix(t.col), t.unload()) : t.reload())
          }
          return i
     }
     static add(t, e, r, s) {
          Node._n = Node._n || [], Node._n.push(new Node(t, e, r))
     }
     getMag() {
          return this.mag * this.L
     }
     reload() {
          this.L < 1 && (this.L += RSP * RSP * this.mag)
     }
     unload() {
          -1 < this.L && (this.L -= RSP * this.mag)
     }
};
    </script>
  </body>
</html>
