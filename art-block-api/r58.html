<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script>
      // Token Ids: 10000000,10000001,10000002,10000003,10000004,10000005,10000006,10000007,10000008,10000009,10000010,10000011,10000012,10000013,10000014,10000015,10000016,10000017,10000018,10000019,10000020,10000021,10000022,10000023,10000024,10000025,10000026,10000027,10000028,10000029,10000030,10000031,10000032,10000033,10000034,10000035,10000036,10000037,10000038,10000039,10000040,10000041,10000042,10000043,10000044,10000045,10000046,10000047,10000048,10000049,10000050,10000051,10000052,10000053,10000054,10000055,10000056,10000057,10000058,10000059,10000060,10000061,10000062,10000063,10000064,10000065,10000066,10000067,10000068,10000069,10000070,10000071,10000072,10000073,10000074,10000075,10000076,10000077,10000078,10000079,10000080,10000081,10000082,10000083,10000084,10000085,10000086,10000087,10000088,10000089,10000090,10000091,10000092,10000093,10000094,10000095,10000096,10000097,10000098,10000099
      let tokenData = {
        hash:
          "0x2ed5912b84b7777777777772735e5a45416a5a723172a643ca545bee87be96c2",
        //"0x2ed5912b84b45dad487dd392735e5a45416a5a723172a643ca545bee87be96c2", 0x9C238282Db349A20d501c5bfeE13ed29ae5a451C",
        tokenId: "500005"
      };
    </script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
      }

      canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
  </head>
  <body>
    <center>
      <h1>
        5 üçæ
      </h1>
      <a href="https://api.artblocks.io/project/5">project 5</a>
    </center>
    <script>
      var DEFAULT_SIZE = 480,
     DIM = Math.min(window.innerWidth, window.innerHeight),
     M = DIM / DEFAULT_SIZE;
let hashData, hashIndex = 0;

function setup() {
     let a = parseInt(tokenData.hash.slice(0, 16), 16),
          e = new Random(a),
          n = [...Array(225)].map(() => int(e.random_between(0, 255)));
     hashData = setupParametersFromTokenData(tokenData).concat(n), createCanvas(DIM, DIM);
     let t = hashData[inc()];
     console.log(t), t < 25 ? background(255, 215, 0) : t < 50 ? background(253, 245, 230) : t < 75 ? background(250, 250, 210) : t < 100 ? background(255, 182, 193) : t < 125 ? background(250, 235, 215) : t < 150 ? background(248, 248, 255) : t < 170 ? background(0) : t < 195 ? background(230, 230, 250) : t < 218 ? background(255, 239, 213) : background(255), noLoop()
}
class Random {
     constructor(a) {
          this.seed = a
     }
     random_dec() {
          return this.seed ^= this.seed << 13, this.seed ^= this.seed >> 17, this.seed ^= this.seed << 5, (this.seed < 0 ? 1 + ~this.seed : this.seed) % 1e3 / 1e3
     }
     random_between(a, e) {
          return a + (e - a) * this.random_dec()
     }
}

function draw() {
     translate(55 * M, 55 * M);
     for (var a = 0; a < 400; a += 110)
          for (var e = 0; e < 400; e += 110) {
               let n = hashData[inc()];
               push(), translate(a * M, e * M), blendMode(EXCLUSION), fill(0, 0, 255), n >= 170 ? ellipse(20 * M, 20 * M, 100 * M, 100 * M) : pickShape(hashData[inc()]), fill(255, 0, 0), n < 86 ? ellipse(20 * M, 20 * M, 100 * M, 100 * M) : pickShape(hashData[inc()]), fill(0, 255, 0), n < 170 && n >= 86 && ellipse(20 * M, 20 * M, 100 * M, 100 * M), pickShape(hashData[inc()]), pop()
          }
}

function pickShape(a) {
     let e = inc();
     if (a <= 51) ellipse(20 * M, 20 * M, hashData[e] / 3 * M, hashData[e] / 3 * M);
     else if (a <= 102) {
          let a = inc();
          ellipse(20 * M, 20 * M, hashData[e] / 3 * M, hashData[a] / 3 * M)
     } else if (a <= 154) arc(20 * M, 20 * M, 80 * M, 80 * M, (PI, rangeConv(hashData[inc()]), 60), hashData[e]);
     else if (a <= 208) {
          let a = rangeConv(hashData[inc()], 60),
               e = rangeConv(hashData[inc()], 60),
               n = rangeConv(hashData[inc()], 60);
          abs(a - n) < 10 && (n += 10);
          let t = rangeConv(hashData[inc()], 60);
          abs(e - t) < 10 && (t += 10);
          let s = rangeConv(hashData[inc()], 60);
          abs(n - s) < 10 && (s += 10);
          let h = rangeConv(hashData[inc()], 60);
          abs(t - h) < 10 && (h += 10), triangle(a * M, e * M, n * M, t * M, s * M, h * M)
     } else {
          let a = rangeConv(hashData[inc()], 30) + 10,
               e = rangeConv(hashData[inc()], 30) + 10;
          rect(rangeConv(hashData[inc()], 30) * M, rangeConv(hashData[inc()], 30) * M, a * M, e * M)
     }
     if (a - inc() == 42) {
          let e = (rangeConv(hashData[inc()], 30) - 10) * M,
               n = (rangeConv(hashData[inc()], 30) - 10) * M;
          fill(255, 0, 0), ellipse(e, n, 40 * M, 5 * M), fill(0, 255, 0), 119 == a || 164 == a || 95 == a ? arc(e, n, 15 * M, 17 * M, PI, TWO_PI) : ellipse(e, n, 20 * M, 20 * M)
     }
}

function rangeConv(a, e) {
     return a * e / 255
}

function setupParametersFromTokenData(a) {
     let e = [];
     for (let a = 0; a < 32; a++) e.push(tokenData.hash.slice(2 + 2 * a, 4 + 2 * a));
     return e.map(a => parseInt(a, 16))
}

function generateSeedFromTokenData(a) {
     return parseInt(tokenData.hash.slice(0, 16), 16)
}

function inc() {
     return hashIndex = (hashIndex + 1) % hashData.length
}
    </script>
  </body>
</html>
