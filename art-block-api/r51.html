<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script>
      // Token Ids: 10000000,10000001,10000002,10000003,10000004,10000005,10000006,10000007,10000008,10000009,10000010,10000011,10000012,10000013,10000014,10000015,10000016,10000017,10000018,10000019,10000020,10000021,10000022,10000023,10000024,10000025,10000026,10000027,10000028,10000029,10000030,10000031,10000032,10000033,10000034,10000035,10000036,10000037,10000038,10000039,10000040,10000041,10000042,10000043,10000044,10000045,10000046,10000047,10000048,10000049,10000050,10000051,10000052,10000053,10000054,10000055,10000056,10000057,10000058,10000059,10000060,10000061,10000062,10000063,10000064,10000065,10000066,10000067,10000068,10000069,10000070,10000071,10000072,10000073,10000074,10000075,10000076,10000077,10000078,10000079,10000080,10000081,10000082,10000083,10000084,10000085,10000086,10000087,10000088,10000089,10000090,10000091,10000092,10000093,10000094,10000095,10000096,10000097,10000098,10000099
      let tokenData = {
        hash:
          "0x2ed5912b84b7777777777772735e5a45416a5a723172a643ca545bee87be96c2",
        //"0x2ed5912b84b45dad487dd392735e5a45416a5a723172a643ca545bee87be96c2", 0x9C238282Db349A20d501c5bfeE13ed29ae5a451C",
        tokenId: "500005"
      };
    </script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
      }

      canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
  </head>
  <body>
    <center>
      <h1>
        5 üçæ
      </h1>
      <a href="https://api.artblocks.io/project/5">project 5</a>
    </center>
    <script>
      function sfc32(r, n, t, s) {
     return function() {
          var e = ((r |= 0) + (n |= 0) | 0) + (s |= 0) | 0;
          return s = s + 1 | 0, r = n ^ n >>> 9, n = (t |= 0) + (t << 3) | 0, t = (t = t << 21 | t >>> 11) + e | 0, (e >>> 0) / 4294967296
     }
}
let prng = new sfc32(parseInt(tokenData.hash.substr(2, 8), 16), parseInt(tokenData.hash.substr(10, 8), 16), parseInt(tokenData.hash.substr(18, 8), 16), parseInt(tokenData.hash.substr(27, 8), 16));

function rI(r, n) {
     return parseInt(n * r())
}

function rgbC(r) {
     return "rgb(" + r[0] + "," + r[1] + "," + r[2] + ")"
}

function rgbCB(r, n, t, s) {
     return "rgb(" + parseInt(r[0] * t + n[0] * s) + "," + parseInt(r[1] * t + n[1] * s) + "," + parseInt(r[2] * t + n[2] * s) + ")"
}
let pal = [
          [
               [209, 41, 66],
               [245, 221, 129],
               [75, 129, 184],
               [144, 184, 230]
          ],
          [
               [209, 41, 66],
               [245, 221, 129],
               [75, 129, 184],
               [144, 184, 230]
          ],
          [
               [62, 137, 137],
               [29, 45, 68],
               [232, 221, 181],
               [167, 117, 77]
          ],
          [
               [89, 83, 88],
               [168, 172, 61],
               [255, 236, 89],
               [252, 127, 49]
          ],
          [
               [158, 0, 89],
               [93, 127, 218],
               [182, 156, 211],
               [239, 121, 138]
          ],
          [
               [218, 165, 136],
               [176, 208, 211],
               [163, 201, 168],
               [68, 99, 63]
          ],
          [
               [0, 50, 73],
               [98, 144, 195],
               [234, 225, 81],
               [240, 135, 0]
          ],
          [
               [215, 65, 167],
               [6, 174, 213],
               [255, 252, 49],
               [247, 92, 3]
          ],
          [
               [215, 65, 167],
               [6, 174, 213],
               [255, 252, 49],
               [247, 92, 3]
          ]
     ],
     s_CR = .75,
     w_CR = .25,
     s_R = 1 / 650,
     p = genParams();

function genParams() {
     let r = pal.splice(rI(prng, 9), 1)[0],
          n = r.splice(rI(prng, 4), 1)[0],
          t = r.splice(rI(prng, 3), 1)[0],
          s = r.splice(rI(prng, 2), 1)[0],
          e = pal.splice(rI(prng, 8), 1)[0],
          p = e.splice(rI(prng, 4), 1)[0],
          _ = e.splice(rI(prng, 3), 1)[0],
          i = e.splice(rI(prng, 2), 1)[0];
     return {
          e_S: 0 == rI(prng, 90),
          s_A: 0 == rI(prng, 12),
          s_BSE: 0 == rI(prng, 18),
          s_BSS: rI(prng, 5),
          c_B: 0 == rI(prng, 18),
          g_H: 0 == rI(prng, 2),
          sk_CA: rgbC(t),
          su_CA: rgbC(n),
          wa_CA: rgbC(s),
          rf_CA: rgbCB(n, s, s_CR, w_CR),
          au_CA: rgbCB(s, n, w_CR, s_CR),
          su_SA: rI(prng, 5),
          su_SVA: rI(prng, 2) + 2,
          hz_SA: rI(prng, 5),
          st_TA: 0 == rI(prng, 12),
          st_SA: rI(prng, 4) + 3,
          st_DA: rI(prng, 2) + 1,
          sk_CB: rgbC(_),
          su_CB: rgbC(p),
          wa_CB: rgbC(i),
          rf_CB: rgbCB(p, i, s_CR, w_CR),
          au_CB: rgbCB(i, p, w_CR, s_CR),
          su_SB: rI(prng, 5),
          su_SVB: rI(prng, 2) + 2,
          hz_SB: rI(prng, 5),
          st_TB: 0 == rI(prng, 12),
          st_SB: rI(prng, 4) + 3,
          st_DB: rI(prng, 2) + 1
     }
}

function setup() {
     let r = Math.min(window.innerWidth, window.innerHeight);
     createCanvas(r, r), noLoop()
}

function draw() {
     background(255);
     let r = Math.min(window.innerWidth, window.innerHeight) / 1e3,
          n = parseInt(p.st_SA * s_R * 1e3),
          t = n + parseInt(p.st_DA * s_R * 1e3),
          s = parseInt(p.st_SB * s_R * 1e3),
          e = s + parseInt(p.st_DB * s_R * 1e3);
     for (let _ = 0; _ < 1200; _++)
          for (let i = 0; i < 1200; i++)
               if (!p.e_S || !wSSC(i, _, 1e3) && !wSRB(i, _, 1e3)) {
                    if (wSA(i, 1e3)) {
                         if (_ % t || i % t) continue;
                         strokeWeight(Math.trunc(r * n))
                    } else {
                         if (_ % e || i % e) continue;
                         strokeWeight(Math.trunc(r * s))
                    }
                    stroke(sC(i, _, 1e3)), point(Math.trunc(r * i), Math.trunc(r * _))
               }
}

function sC(r, n, t) {
     let s = p.g_H ? r ^ n : r + n,
          e = s % 20 == 0,
          _ = s % 20 == 0,
          i = p.c_B && wSA(r, t) && e,
          u = p.c_B && !wSA(r, t) && _;
     return p.s_A && wSCA(r, n, t) ? wSA(r, t) ? wSB(r, n, t) ? i ? p.rf_CB : p.rf_CA : i ? p.au_CB : p.au_CA : wSB(r, n, t) ? u ? p.rf_CA : p.rf_CB : u ? p.au_CA : p.au_CB : wSSC(r, n, t) ? wSA(r, t) ? i ? p.su_CB : p.su_CA : u ? p.su_CA : p.su_CB : wSRB(r, n, t) ? wSA(r, t) ? i ? p.rf_CB : p.rf_CA : u ? p.rf_CA : p.rf_CB : wSB(r, n, t) ? wSA(r, t) ? i ? p.sk_CB : p.sk_CA : u ? p.sk_CA : p.sk_CB : wWB(r, n, t) ? wSA(r, t) ? i ? p.wa_CB : p.wa_CA : u ? p.wa_CA : p.wa_CB : 255
}
let skyDividerRatio = 7 / 12,
     sunRadiusRatio = .25,
     sunBandSizeRatio = 1 / 60,
     sideBySideRatio = 1 / 12;

function sR(r) {
     return sunRadiusRatio * r
}

function sBSDL(r) {
     let n = r / 2;
     return 0 == p.s_BSS ? n : p.nonShiftedDivingLine % 2 == 0 ? n - r * sideBySideRatio : n + r * sideBySideRatio
}

function wSA(r, n) {
     return !p.s_BSE || r <= sBSDL(n)
}

function hL(r, n) {
     let t = skyDividerRatio * n;
     return wSA(r, n) ? 0 == p.hz_SA ? t : p.hz_SA % 2 == 0 ? t - sR(n) : t + sR(n) / 3 : 0 == p.hz_SB ? t : p.hz_SB % 2 == 0 ? t - sR(n) : t + sR(n) / 3
}

function sT(r, n) {
     let t = n / 2;
     if (wSA(r, n)) {
          let r = sR(n) / p.su_SVA;
          return 0 == p.su_SA ? t : p.su_SA % 2 == 0 ? t - r : t + r
     } {
          let r = sR(n) / p.su_SVB;
          return 0 == p.su_SB ? t : p.su_SB % 2 == 0 ? t - r : t + r
     }
}

function wSSC(r, n, t) {
     return !!wSB(r, n, t) && wSC(r, n, t)
}

function wSRB(r, n, t) {
     if (!wWB(r, n, t)) return !1;
     if (!wSC(r, n, t)) return !1;
     let s = sunBandSizeRatio * t,
          e = 2 * s,
          _ = hL(r, t),
          i = _ + sR(t);
     for (let u = _ + s; u <= i; u += e) {
          let e = u + s;
          if (n >= u && n <= e) {
               if (wSA(r, t)) {
                    if (p.st_TA) return (r + n) % (rI(prng, 2) + 2) == 0
               } else if (p.st_TB) return (r + n) % (rI(prng, 2) + 2) == 0;
               return !0
          }
     }
     return !1
}

function wSC(r, n, t) {
     let s = sR(t),
          e = r - sT(r, t),
          p = n - hL(r, t);
     return e * e + p * p <= s * s
}

function wSCA(r, n, t) {
     if (wSC(r, n, t)) return !1;
     let s = parseInt(p.st_SA * s_R * t),
          e = parseInt(p.st_SB * s_R * t),
          _ = parseInt(p.st_DA * s_R * t),
          i = parseInt(p.st_DB * s_R * t),
          u = wSA(r, t) ? _ + s : i + e,
          a = sR(t) + min(3 * u, 5),
          S = r - sT(r, t),
          C = n - hL(r, t);
     return S * S + C * C <= a * a
}

function wSB(r, n, t) {
     return n <= hL(r, t)
}

function wWB(r, n, t) {
     return n > hL(r, t)
}
    </script>
  </body>
</html>
