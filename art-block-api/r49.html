<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script>
      // Token Ids: 10000000,10000001,10000002,10000003,10000004,10000005,10000006,10000007,10000008,10000009,10000010,10000011,10000012,10000013,10000014,10000015,10000016,10000017,10000018,10000019,10000020,10000021,10000022,10000023,10000024,10000025,10000026,10000027,10000028,10000029,10000030,10000031,10000032,10000033,10000034,10000035,10000036,10000037,10000038,10000039,10000040,10000041,10000042,10000043,10000044,10000045,10000046,10000047,10000048,10000049,10000050,10000051,10000052,10000053,10000054,10000055,10000056,10000057,10000058,10000059,10000060,10000061,10000062,10000063,10000064,10000065,10000066,10000067,10000068,10000069,10000070,10000071,10000072,10000073,10000074,10000075,10000076,10000077,10000078,10000079,10000080,10000081,10000082,10000083,10000084,10000085,10000086,10000087,10000088,10000089,10000090,10000091,10000092,10000093,10000094,10000095,10000096,10000097,10000098,10000099
      let tokenData = {
        hash:
          "0x2ed5912b84b7777777777772735e5a45416a5a723172a643ca545bee87be96c2",
        //"0x2ed5912b84b45dad487dd392735e5a45416a5a723172a643ca545bee87be96c2", 0x9C238282Db349A20d501c5bfeE13ed29ae5a451C",
        tokenId: "500005"
      };
    </script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
      }

      canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>
  </head>
  <body>
    <center>
      <h1>
        5 üçæ
      </h1>
      <a href="https://api.artblocks.io/project/5">project 5</a>
    </center>
    <script>
      var DEFAULT_SIZE = 800,
     WIDTH = window.innerWidth,
     HEIGHT = window.innerHeight,
     DIM = Math.min(WIDTH, HEIGHT),
     M = DIM / DEFAULT_SIZE;
let cols, rows, oX, oY, canvas = DEFAULT_SIZE * M,
     ttlPnts = 5,
     grdSprSz = 100 * M,
     grdGap = 170 * M;
cols = 4, rows = 4, oX = 80, oY = 80;
let rectCoors = {
     x: [],
     y: []
};

function setGridType(r) {
     switch (r) {
          case 0:
               ttlPnts = Math.round(R.random_between(10, 80)), cols = 2, rows = 2, grdSprSz = 250 * M, grdGap = 400 * M, oX = 80 * M, oY = 80 * M, fontsize = 200 * M, yOff = 175 * M, triSz = 48 * M, sqrSz = 80 * M, cirSz = 80 * M;
               break;
          case 1:
               ttlPnts = 5, cols = 4, rows = 4, grdSprSz = 100 * M, grdGap = 170 * M, oX = 88 * M, oY = 88 * M, fontsize = 72 * M, yOff = 80 * M, triSz = 28 * M, sqrSz = 40 * M, cirSz = 40 * M;
               break;
          case 2:
               ttlPnts = 5, cols = 8, rows = 8, grdSprSz = 70 * M, grdGap = 95 * M, oX = 32 * M, oY = 32 * M, fontsize = 16 * M, yOff = 0, triSz = 14 * M, sqrSz = 20 * M, cirSz = 20 * M
     }
}

function mapRange(r, e, t, s, o) {
     return Math.round(s + (o - s) * (r - e) / (t - e))
}
var hashPairs = [],
     gridHashPairs = [],
     decPairs = [];
let myHash;

function splitHash(r) {
     let e = myHash.length;
     for (let r = 0; r < e; r++)
          for (let e = 0; e < 32; e++) hashPairs.push(myHash[r].slice(2 + 2 * e, 4 + 2 * e))
}

function getDecPairs() {
     return decPairs = hashPairs.map(r => parseInt(r, 16))
}
myHash = [tokenData.hash];
class Random {
     constructor(r) {
          this.seed = r
     }
     random_dec() {
          return this.seed ^= this.seed << 13, this.seed ^= this.seed >> 17, this.seed ^= this.seed << 5, (this.seed < 0 ? 1 + ~this.seed : this.seed) % 1e3 / 1e3
     }
     random_between(r, e) {
          return r + (e - r) * this.random_dec()
     }
     random_int(r, e) {
          return Math.floor(this.random_between(r, e + 1))
     }
     random_choice(r) {
          return r[Math.floor(this.random_between(0, .99 * r.length))]
     }
}
splitHash(), getDecPairs();
let mySeed = parseInt(tokenData.hash.slice(0, 16), 16),
     R = new Random(mySeed);

function getOccurrence(r, e) {
     var t = 0;
     return r.forEach(r => r === e && t++), t
}
var gl = {
     tf: !1,
     txt: 155,
     lines: 0,
     bg: 200
};

function setHashTxt(r, e) {
     switch (e) {
          case 0:
               gridHashPairs.push("0x", "..", "..", myHash[0][64] + myHash[0][65]);
               break;
          case 1:
               gridHashPairs = ["0x"].concat(hashPairs.slice(0, r).concat(["..."]).concat(hashPairs.slice(r + 18, 32)));
               break;
          case 2:
               for (var t = 0; t < myHash[0].length; t++) 0 == t || 1 == t || 64 == t || 65 == t || gridHashPairs.push(myHash[0][t]);
               (gridHashPairs = ["0x"].concat(gridHashPairs)).push(myHash[0][64] + myHash[0][65])
     }
}

function createGrid() {
     for (let t = 0; t < rows; t++)
          for (let s = 0; s < cols; s++) {
               var r = t * grdGap,
                    e = s * grdGap;
               noStroke(), rectCoors.x.push(e + oX), rectCoors.y.push(r + oY)
          }
     hashTxtCreate()
}
let font, fontsize = 72,
     yOff = 80;

function hashTxtCreate() {
     for (let r = 0; r < gridHashPairs.length; r++) drawHashTxt(gridHashPairs[r], rectCoors.x[r], rectCoors.y[r])
}

function drawHashTxt(r, e, t) {
     noStroke(), textSize(fontsize), fill(gl.txt), text(r, e, t + yOff)
}

function getPoints(r, e) {
     let t = {
          x: [],
          y: []
     };
     for (let s = 0; s < ttlPnts; s++) t.x.push(R.random_between(r, r + grdSprSz)), t.y.push(R.random_between(e, e + grdSprSz));
     return t
}
let triSz = 28,
     sqrSz = 40,
     cirSz = 40;
var msgN = !0,
     msgNarr = [];

function createShape(r, e, t) {
     let s;
     switch (strokeJoin(ROUND), 1 == gl.tf ? s = Math.round(R.random_between(3, 6)) : (s = Math.round(R.random_between(0, 6)), msgNarr.push(s)), s) {
          case 0:
               fill(r), ellipse(e, t, cirSz, cirSz);
               break;
          case 1:
               fill(r), triangle(e - triSz, t + triSz, e, t - triSz / 2 - 5, e + triSz, t + triSz);
               break;
          case 2:
               fill(r), rect(e - 15 * M, t - 15 * M, sqrSz, sqrSz);
               break;
          case 3:
               noFill(), ellipse(e, t, cirSz, cirSz);
               break;
          case 4:
               noFill(), triangle(e - triSz, t + triSz, e, t - triSz / 2 - 5 * M, e + triSz, t + triSz);
               break;
          case 5:
               noFill(), rect(e - 15 * M, t - 15 * M, sqrSz, sqrSz)
     }
}
let clrs, c0, c1, c2, c3, c4, c5, c6;

function pkClrs(r) {
     c0 = [color(109, 95, 146), color(216, 145, 177), color(255, 215, 145)], c1 = [color(51, 73, 9), color(170, 200, 112), color(103, 120, 66)], c2 = [color(123, 172, 239), color(255, 254, 252), color(235, 256, 185)], c3 = [color(84, 189, 182), color(230, 220, 171), color(255, 65, 135)], c4 = [color(61, 46, 87), color(26, 73, 143), color(107, 134, 181)], c5 = [color(255, 93, 38), color(234, 50, 84), color(233, 255, 112)], c6 = [color(253, 205, 121), color(213, 96, 76), color(16, 41, 46)], clrs = [c0, c1, c2, c3, c4, c5, c6];
     var e = Math.round(R.random_between(0, 2));
     return clrs[r][e]
}
var cP = Math.round(R.random_between(0, 6));

function drawLine() {
     for (let r = 0; r < rectCoors.x.length; r++) {
          let e = getPoints(rectCoors.x[r], rectCoors.y[r]);
          noStroke();
          for (let r = 0; r < e.x.length; r++) stroke(gl.lines), strokeWeight(3 * M), line(e.x[r - 2], e.y[r - 2], e.x[r], e.y[r]);
          createShape(pkClrs(cP), e.x[0], e.y[0])
     }(getOccurrence(msgNarr, 0) >= 1 || getOccurrence(msgNarr, 1) >= 1 || getOccurrence(msgNarr, 2) >= 1) && (msgN = !1)
}
var glClr = Math.round(R.random_between(0, 2)),
     gl7 = getOccurrence(decPairs, 7);
let vType = mapRange(decPairs[31], 0, 255, 0, 2);

function setup() {
     if (createCanvas(canvas, canvas), gl7 >= 3) switch (glClr) {
          case 0:
               gl.tf = !0, gl.txt = color(255), gl.lines = color(8), gl.bg = color(224, 25, 49);
               break;
          case 1:
               gl.tf = !0, gl.txt = color(255, 255, 255), gl.lines = color(0, 255, 0), gl.bg = color(0, 0, 0);
               break;
          case 2:
               gl.tf = !0, gl.txt = color(0, 0, 0), gl.lines = color(255, 255, 255), gl.bg = color(255, 168, 0)
     }
     background(gl.bg), setGridType(vType), setHashTxt(mapRange(decPairs[30], 0, 255, 0, 13), vType), createGrid(), drawLine()
}
    </script>
  </body>
</html>
